<tool id="gene_fraction" name="Coverage Sampler" version="0.1.0">
    <requirements>
	<requirement type="package" version="0.1">csa</requirement>
    </requirements>
    <stdio>
        <exit_code range="1:" />
    </stdio>
    <description>Calculates the amount of a gene that is covered from a sample of reads</description>
    <command><![CDATA[
	csa
	  -amr_fp $input1
	  -sam_fp $input2
	  -min $min
	  -max $max
	  -t $threshold
	  -skip $skip
	  -samples $samples
	  -out_fp $output1
    ]]></command>
    <inputs>
	<param type="data" name="input1" format="fasta" label="Reference sequence" />
	<param type="data" name="input2" format="sam" label="SAM file" />
	<param name="min" type="integer" label="Starting sample level"
	       value="1" min="1" max="100" help="(-min)" />
	<param name="max" type="integer" label="Ending sample level"
	       value="1" min="1" max="100" help="(-max)" />
	<param name="threshold" type="integer" label="Gene threshold"
	       value="1" min="1" max="100" help="(-t)" />
	<param name="skip" type="integer" label="Amount of levels to skip"
	       value="1" min="1" max="100" help="(-skip)" />
	<param name="samples" type="integer" label="Amount of samples per level"
	       value="1" min="1" max="100" help="(-samples)" />
    </inputs>
    <outputs>
	<data name="output1" format="tabular" />
    </outputs>
    <tests>
      <test>
      <param name="input1" value="ref.fa"/>
      <param name="input2" value="test.sam"/>
      <output name="outfil1" file="out.txt"/>
      </test>
    </tests>
    <help><![CDATA[
This program takes iterative samples from a SAM file with the goal of identifying the amount of a gene that is covered by a sample of reads.
        
Program: Coverage Sampler 
Contact: Chris Dean <cdean11@rams.colostate.edu
Usage: csa [options]
Options:
    -amr_fp    amr database path
    -sam_fp    sam file path
    -min       starting level
    -max       ending level
    -skip      amount of levels to skip
    -t         gene fraction threshold
    -samples   amount of samples per level
    -d         directory parsing
    -bam       bam file parsing
    -out_fp    output file path
    ]]></help>
</tool>
